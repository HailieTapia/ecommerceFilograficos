<div class="relative">
  <button (click)="toggleProfileDropdown()" class="flex items-center space-x-2">
    <div class="w-8 h-8 rounded-full flex items-center justify-center" [ngClass]="{'bg-gray-300': !themeService.isDarkMode(), 'bg-gray-600': themeService.isDarkMode()}">
      <span *ngIf="!profilePictureUrl" class="text-sm font-medium" [ngClass]="{'text-gray-600': !themeService.isDarkMode(), 'text-gray-300': themeService.isDarkMode()}">
        {{ userRole === 'administrador' ? 'AD' : (userName ? (userName | slice:0:2 | uppercase) : 'MT') }}
      </span>
      <img *ngIf="profilePictureUrl" [src]="profilePictureUrl" alt="Profile" class="w-8 h-8 rounded-full">
    </div>
    <span class="text-sm font-medium text-light-blanco dark:text-dark-primary">{{ userName || (userRole === 'administrador' ? 'Admin' : 'Usuario') }}</span>
    <i class="fas fa-chevron-down w-4 h-4 text-light-blanco dark:text-dark-primary"></i>
  </button>

  <div *ngIf="isProfileDropdownOpen" class="absolute right-0 mt-2 w-48 rounded-lg shadow-lg z-20" [ngClass]="{'bg-light-encabezado border-gray-200': !themeService.isDarkMode(), 'bg-dark-background border-gray-600': themeService.isDarkMode()}">
    <div class="py-1">
      <a [routerLink]="userRole === 'administrador' ? '/company' : '/profile'" class="block px-4 py-2 text-sm hover:bg-light-primary-hover dark:hover:bg-dark-primary-hover text-light-blanco dark:text-dark-text hover:text-white transition-all duration-300">Mi Cuenta</a>
      <a *ngIf="userRole !== 'administrador'" [routerLink]="['/orders']" class="block px-4 py-2 text-sm hover:bg-light-primary-hover dark:hover:bg-dark-primary-hover text-light-blanco dark:text-dark-text hover:text-white transition-all duration-300">Mis Pedidos</a>
      <a *ngIf="userRole !== 'administrador'" [routerLink]="['/my-reviews']" class="block px-4 py-2 text-sm hover:bg-light-primary-hover dark:hover:bg-dark-primary-hover text-light-blanco dark:text-dark-text hover:text-white transition-all duration-300">Mis Opiniones</a>
      <a (click)="logout.emit()" class="block px-4 py-2 text-sm hover:bg-light-primary-hover dark:hover:bg-dark-primary-hover text-light-blanco dark:text-dark-text hover:text-white transition-all duration-300 cursor-pointer">Cerrar sesi√≥n</a>
    </div>
  </div>
</div>