<div class="flex flex-col h-screen transition-all duration-300 relative"
     [ngClass]="{'w-64': sidebarOpen, 'w-16': !sidebarOpen, 'bg-light-encabezado': !themeService.isDarkMode(), 'bg-dark-background': themeService.isDarkMode()}">
  <!-- Logo -->
  <div class="p-6 border-b" [ngClass]="{'border-gray-200': !themeService.isDarkMode(), 'border-gray-600': themeService.isDarkMode()}">
    <div class="flex items-center space-x-2">
      <img *ngIf="logoPreview" [src]="logoPreview" alt="Logo" class="w-8 h-8 rounded border border-gray-200 dark:border-gray-600">
      <span *ngIf="sidebarOpen" class="text-lg font-semibold text-light-blanco dark:text-dark-primary">{{ companyName || 'Filográficos' }}</span>
    </div>
    <p *ngIf="sidebarOpen" class="text-sm mt-1 text-light-secondary dark:text-dark-secondary">Panel Administrativo</p>
  </div>

  <!-- Toggle Button -->
  <button (click)="toggleSidebar()" class="absolute -right-3 top-6 w-6 h-6 bg-light-encabezado dark:bg-dark-background border border-gray-600 rounded-full flex items-center justify-center text-light-blanco dark:text-dark-primary hover:bg-light-primary-hover dark:hover:bg-dark-primary-hover transition-colors">
    <i class="fas" [ngClass]="sidebarOpen ? 'fa-times' : 'fa-bars'"></i>
  </button>

  <!-- Navigation -->
  <nav class="flex-1 px-4 py-6 space-y-1">
    <div *ngFor="let item of sidebarItems" class="relative group">
      <a [routerLink]="item.path" routerLinkActive="bg-light-primary-hover dark:bg-dark-primary-hover text-white" class="flex items-center justify-between px-3 py-3 rounded-lg text-sm font-medium transition-colors"
         [ngClass]="{'text-light-blanco dark:text-dark-primary hover:bg-light-primary-hover dark:hover:bg-dark-primary-hover hover:text-white': true}">
        <div class="flex items-center space-x-3">
          <i class="fas {{ item.icon }} w-5 h-5"></i>
          <span *ngIf="sidebarOpen">{{ item.label }}</span>
        </div>
      </a>
      <!-- Tooltip for collapsed state -->
      <div *ngIf="!sidebarOpen" class="absolute left-full ml-2 px-2 py-1 bg-gray-800 dark:bg-gray-900 text-white dark:text-dark-text text-sm rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50">
        {{ item.label }}
      </div>
    </div>
  </nav>

  <!-- Support Section -->
  <div class="px-4 py-4 border-t" [ngClass]="{'border-gray-200': !themeService.isDarkMode(), 'border-gray-600': themeService.isDarkMode()}">
    <p *ngIf="sidebarOpen" class="text-xs font-semibold mb-3 uppercase text-light-secondary dark:text-dark-secondary">Help & Support</p>
    <div class="space-y-1">
      <div *ngFor="let item of supportItems" class="relative group agresive-hover">
        <a [routerLink]="item.path" class="flex items-center space-x-3 px-3 py-2 rounded-lg text-sm transition-colors text-light-blanco dark:text-dark-primary hover:bg-light-primary-hover dark:hover:bg-dark-primary-hover hover:text-white">
          <i class="fas {{ item.icon }} w-5 h-5"></i>
          <span *ngIf="sidebarOpen">{{ item.label }}</span>
        </a>
        <!-- Tooltip for collapsed state -->
        <div *ngIf="!sidebarOpen" class="absolute left-full ml-2 px-2 py-1 bg-gray-800 dark:bg-gray-900 text-white dark:text-dark-text text-sm rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50">
          {{ item.label }}
        </div>
      </div>
      <div class="relative group">
        <button (click)="onLogout()" class="flex items-center space-x-3 px-3 py-2 mt-4 rounded-lg text-sm cursor-pointer transition-colors text-light-blanco dark:text-dark-primary hover:bg-light-primary-hover dark:hover:bg-dark-primary-hover hover:text-white">
          <i class="fas fa-sign-out-alt w-5 h-5"></i>
          <span *ngIf="sidebarOpen">Cerrar Sesión</span>
        </button>
        <!-- Tooltip for collapsed state -->
        <div *ngIf="!sidebarOpen" class="absolute left-full ml-2 px-2 py-1 bg-gray-800 dark:bg-gray-900 text-white dark:text-dark-text text-sm rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50">
          Cerrar Sesión
        </div>
      </div>
    </div>
  </div>
</div>