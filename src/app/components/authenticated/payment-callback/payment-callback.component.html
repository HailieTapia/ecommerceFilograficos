<app-spinner [isLoading]="isLoading"></app-spinner>
<div *ngIf="!isLoading" class="max-w-5xl mx-auto py-10 px-5 bg-light-background dark:bg-dark-background min-h-screen font-sans">
  <!-- Success State -->
  <div *ngIf="paymentStatus === 'success'" class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md text-center">
    <h1 class="text-2xl font-bold text-light-text dark:text-dark-text">¡Pago exitoso!</h1>
    <p class="text-light-secondary dark:text-dark-secondary mt-4">
      Tu orden está siendo procesada. Total: ${{ getOrderTotal() }}.
      <span *ngIf="hasDiscount()">
        Descuento aplicado: ${{ getOrderDiscount() }}
        <span *ngIf="appliedPromotion"> (Promoción: {{ appliedPromotion.name }})</span>.
      </span>
    </p>
    <p class="text-light-secondary dark:text-dark-secondary mt-2">Serás redirigido a la confirmación en unos segundos...</p>
  </div>

  <!-- Pending State -->
  <div *ngIf="paymentStatus === 'pending'" class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md text-center">
    <h1 class="text-2xl font-bold text-light-text dark:text-dark-text">Pago pendiente</h1>
    <p class="text-light-secondary dark:text-dark-secondary mt-4">
      Tu pago está en proceso. Total: ${{ getOrderTotal() }}.
      <span *ngIf="hasDiscount()">
        Descuento aplicado: ${{ getOrderDiscount() }}
        <span *ngIf="appliedPromotion"> (Promoción: {{ appliedPromotion.name }})</span>.
      </span>
    </p>
    <p class="text-light-secondary dark:text-dark-secondary mt-2">Por favor, verifica el estado más tarde en tus órdenes.</p>
    <button (click)="goToOrders()" class="mt-4 bg-light-primary dark:bg-dark-primary text-white py-2 px-4 rounded-full hover:bg-light-primary-hover dark:hover:bg-dark-primary-hover transition-colors">
      Ver Mis Órdenes
    </button>
  </div>

  <!-- Failure State -->
  <div *ngIf="paymentStatus === 'failure'" class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md text-center">
    <h1 class="text-2xl font-bold text-light-text dark:text-dark-text">Pago fallido</h1>
    <p class="text-light-secondary dark:text-dark-secondary mt-4">
      Hubo un problema con tu pago. Total: ${{ getOrderTotal() }}.
      <span *ngIf="hasDiscount()">
        Descuento aplicado: ${{ getOrderDiscount() }}
        <span *ngIf="appliedPromotion"> (Promoción: {{ appliedPromotion.name }})</span>.
      </span>
    </p>
    <p class="text-light-secondary dark:text-dark-secondary mt-2">Por favor, intenta de nuevo.</p>
    <button (click)="goToCheckout()" class="mt-4 bg-light-primary dark:bg-dark-primary text-white py-2 px-4 rounded-full hover:bg-light-primary-hover dark:hover:bg-dark-primary-hover transition-colors">
      Volver a Pagar
    </button>
  </div>
</div>