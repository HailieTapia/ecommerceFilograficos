<div class="max-w-full mx-auto py-10 px-5 bg-light-background dark:bg-dark-background min-h-screen font-sans">
  <app-spinner [isLoading]="isLoading"></app-spinner>

  <div *ngIf="!isLoading">
    <!-- Título -->
    <h1 class="text-2xl font-bold text-light-text dark:text-dark-text mb-6">Finalizar Compra</h1>

    <!-- Carrito vacío -->
    <div *ngIf="cart.items.length === 0"
      class="flex flex-col items-center justify-center min-h-[50vh] text-center text-light-text dark:text-dark-text">
      <div class="mb-6">
        <i class="fas fa-shopping-cart text-6xl text-light-secondary dark:text-dark-secondary opacity-50"></i>
      </div>
      <h2 class="text-2xl font-semibold text-light-text dark:text-dark-text mb-2">¡Tu carrito está vacío!</h2>
      <p class="text-lg text-light-secondary dark:text-dark-secondary mb-6">
        Parece que no has añadido nada todavía. ¡Vuelve al carrito para añadir productos!
      </p>
    </div>

  <div *ngIf="!isLoading">
    <!-- Contenido del checkout -->
    <div *ngIf="cart.items.length > 0" class="grid grid-cols-1 lg:grid-cols-3 gap-6">
      <!-- Formulario de checkout -->
      <form [formGroup]="orderForm" class="lg:col-span-2 bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md">
        <h2 class="text-xl font-semibold text-light-text dark:text-dark-text mb-4">Detalles de la Orden</h2>

        <!-- Dirección -->
        <div class="mb-4">
          <label class="block text-light-text dark:text-dark-text mb-2">Dirección de envío</label>
          <select formControlName="address_id" class="w-full p-2 border rounded">
            <option [value]="address.address_id">{{address.street}}, {{address.city}}, {{address.state}}</option>
          </select>
        </div>

        <!-- Método de pago -->
        <div class="mb-4">
          <label class="block text-light-text dark:text-dark-text mb-2">Método de pago</label>
          <select formControlName="payment_method" class="w-full p-2 border rounded" required>
            <option value="mercado_pago">Mercado Pago</option>
          </select>
        </div>

        <!-- Opción de envío -->
        <div class="mb-4">
          <label class="block text-light-text dark:text-dark-text mb-2">Método de envío</label>
          <select formControlName="delivery_option" class="w-full p-2 border rounded">
            <option *ngFor="let option of shippingOptions" [value]="option.id">
              {{option.name}} ({{option.cost | currency}})
            </option>
          </select>
        </div>

        <!-- Cupón -->
        <div class="mb-4">
          <label class="block text-light-text dark:text-dark-text mb-2">Código de cupón (opcional)</label>
          <input formControlName="coupon_code" type="text" class="w-full p-2 border rounded">
        </div>

        <!-- Botón de orden -->
        <button (click)="createOrder()" type="button"
          class="bg-light-primary dark:bg-dark-primary text-white py-2 px-6 rounded-full hover:bg-light-primary-hover dark:hover:bg-dark-primary-hover transition-colors">
          Crear Orden
        </button>
      </form>

      <!-- Resumen del carrito (opcional) -->
      <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md">
        <h2 class="text-xl font-semibold text-light-text dark:text-dark-text mb-4">Resumen</h2>
        <!-- Aquí puedes mostrar los items del carrito y totales -->
      </div>
    </div>
  </div>
</div>