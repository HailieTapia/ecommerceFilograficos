<div class="w-full p-4 bg-light-background dark:bg-dark-background transition-colors duration-300">
  <!-- Información del Negocio -->
  <div class="mb-8 flex justify-center">
    <div class="w-full max-w-4xl bg-light-card dark:bg-dark-card shadow-md rounded-lg p-6 border border-gray-200 dark:border-gray-600">
      <h2 class="text-xl font-bold mb-4 text-light-text dark:text-dark-text">Información de Contacto</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Horario de Atención -->
        <div class="space-y-4">
          <div class="flex items-start gap-3">
            <i class="fas fa-clock text-light-primary dark:text-dark-primary mt-1"></i>
            <div>
              <h3 class="font-medium mb-2 text-light-text dark:text-dark-text">Horario de Atención</h3>
              <ul class="space-y-1 text-sm text-light-secondary dark:text-dark-secondary">
                <li>Lunes a Viernes: 9:00 AM - 6:00 PM</li>
                <li>Sábado: 9:00 AM - 2:00 PM</li>
                <li>Domingo: Cerrado</li>
              </ul>
            </div>
          </div>

          <!-- Canales de Contacto -->
          <div class="space-y-3">
            <div class="flex items-center gap-3">
              <i class="fas fa-phone text-light-primary dark:text-dark-primary"></i>
              <span class="text-light-text dark:text-dark-text">{{ companyInfo?.phone_number || '+1 234 567 890' }}</span>
            </div>
            <div class="flex items-center gap-3">
              <i class="fas fa-envelope text-light-primary dark:text-dark-primary"></i>
              <span class="text-light-text dark:text-dark-text">{{ companyInfo?.email || 'soporte@ejemplo.com' }}</span>
            </div>
            <div class="flex items-center gap-3">
              <i class="fab fa-whatsapp text-light-primary dark:text-dark-primary"></i>
              <span class="text-light-text dark:text-dark-text">WhatsApp: {{ companyInfo?.phone_number || '+1 234 567 890' }}</span>
            </div>
          </div>
        </div>

        <!-- Ubicación -->
        <div>
          <div class="flex items-start gap-3 mb-3">
            <i class="fas fa-map-marker-alt text-light-primary dark:text-dark-primary mt-1"></i>
            <div>
              <h3 class="font-medium mb-2 text-light-text dark:text-dark-text">Ubicación</h3>
              <p class="text-sm mb-2 text-light-secondary dark:text-dark-secondary">
                {{ companyInfo?.address_street || '123 Calle Principal' }}, 
                {{ companyInfo?.address_city || 'Ciudad' }}, 
                {{ companyInfo?.address_country || 'País' }}
              </p>
              <a 
                href="https://maps.app.goo.gl/kS1qnSQX1f7YfB9r9"
                target="_blank"
                rel="noopener noreferrer"
                class="inline-block bg-light-button dark:bg-dark-button text-light-primary dark:text-dark-primary px-4 py-2 rounded-md text-sm hover:bg-light-button-hover dark:hover:bg-dark-button-hover transition-colors"
              >
                Ver en Google Maps
              </a>
            </div>
          </div>
          <!-- Recuadro de Google Maps -->
          <div class="border rounded-lg overflow-hidden h-48 border-gray-200 dark:border-gray-600">
            <iframe 
              src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3742.123456789012!2d-98.73384268456789!3d20.123456789012345!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x85d1a123456789ab%3A0x1234567890abcdef!2sCalle%20Plaza%20Ju%C3%A1rez%2C%20Centro%2C%2042000%20Pachuca%20de%20Soto%2C%20Hidalgo!5e0!3m2!1ses!2smx!4v1234567890123!5m2!1ses!2smx"
              width="100%"
              height="100%"
              style="border:0;"
              allowfullscreen=""
              loading="lazy"
              referrerpolicy="no-referrer-when-downgrade"
            ></iframe>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Formulario de Soporte -->
  <div class="flex justify-center">
    <div class="w-full max-w-4xl bg-light-card dark:bg-dark-card shadow-md rounded-lg p-6 border border-gray-200 dark:border-gray-600">
      <h2 class="text-xl font-bold mb-4 text-light-text dark:text-dark-text">Formulario de Soporte Técnico</h2>
      <!-- Mensaje de éxito -->
      <div *ngIf="submitted" class="bg-green-50 dark:bg-green-900 border border-green-200 dark:border-green-700 text-green-800 dark:text-green-200 p-4 rounded-md mb-4 flex items-center gap-3">
        <i class="fas fa-check-circle text-green-600 dark:text-green-400"></i>
        <div>
          <p class="text-light-text dark:text-dark-text">Tu mensaje ha sido enviado exitosamente. Te contactaremos pronto durante nuestro horario de atención.</p>
        </div>
      </div>
      <form [formGroup]="supportForm" (ngSubmit)="onSubmit()" class="space-y-4">
        <div>
          <label class="block text-sm font-medium mb-1 text-light-secondary dark:text-dark-secondary">Nombre</label>
          <input
            type="text"
            formControlName="user_name"
            class="w-full p-2 border rounded-md bg-light-background dark:bg-dark-background border-gray-200 dark:border-gray-600 text-light-text dark:text-dark-text placeholder-light-secondary dark:placeholder-dark-secondary focus:ring-2 focus:ring-light-primary-hover dark:focus:ring-dark-primary-hover focus:border-light-primary-hover dark:focus:border-dark-primary-hover transition-colors"
            placeholder="Ingresa tu nombre"
          />
          <div *ngIf="supportForm.get('user_name')?.invalid && supportForm.get('user_name')?.touched" class="text-light-danger dark:text-dark-danger text-sm">
            El nombre es requerido y debe tener al menos 2 caracteres.
          </div>
        </div>

        <div>
          <label class="block text-sm font-medium mb-1 text-light-secondary dark:text-dark-secondary">Email</label>
          <input
            type="email"
            formControlName="user_email"
            class="w-full p-2 border rounded-md bg-light-background dark:bg-dark-background border-gray-200 dark:border-gray-600 text-light-text dark:text-dark-text placeholder-light-secondary dark:placeholder-dark-secondary focus:ring-2 focus:ring-light-primary-hover dark:focus:ring-dark-primary-hover focus:border-light-primary-hover dark:focus:border-dark-primary-hover transition-colors"
            placeholder="Ingresa tu email"
          />
          <div *ngIf="supportForm.get('user_email')?.invalid && supportForm.get('user_email')?.touched" class="text-light-danger dark:text-dark-danger text-sm">
            Ingresa un email válido.
          </div>
        </div>

        <div>
          <label class="block text-sm font-medium mb-1 text-light-secondary dark:text-dark-secondary">Asunto</label>
          <input
            type="text"
            formControlName="subject"
            class="w-full p-2 border rounded-md bg-light-background dark:bg-dark-background border-gray-200 dark:border-gray-600 text-light-text dark:text-dark-text placeholder-light-secondary dark:placeholder-dark-secondary focus:ring-2 focus:ring-light-primary-hover dark:focus:ring-dark-primary-hover focus:border-light-primary-hover dark:focus:border-dark-primary-hover transition-colors"
            placeholder="Ingresa el asunto"
          />
          <div *ngIf="supportForm.get('subject')?.invalid && supportForm.get('subject')?.touched" class="text-light-danger dark:text-dark-danger text-sm">
            El asunto es requerido y debe tener al menos 5 caracteres.
          </div>
        </div>

        <div>
          <label class="block text-sm font-medium mb-1 text-light-secondary dark:text-dark-secondary">Mensaje</label>
          <textarea
            formControlName="message"
            class="w-full p-2 border rounded-md h-32 bg-light-background dark:bg-dark-background border-gray-200 dark:border-gray-600 text-light-text dark:text-dark-text placeholder-light-secondary dark:placeholder-dark-secondary focus:ring-2 focus:ring-light-primary-hover dark:focus:ring-dark-primary-hover focus:border-light-primary-hover dark:focus:border-dark-primary-hover transition-colors"
            placeholder="Escribe tu mensaje"
            maxlength="500"
          ></textarea>
          <div *ngIf="supportForm.get('message')?.invalid && supportForm.get('message')?.touched" class="text-light-danger dark:text-dark-danger text-sm">
            El mensaje es requerido y no debe exceder 500 caracteres.
          </div>
        </div>

        <!-- reCAPTCHA -->
        <div class="form-group text-center">
          <label class="block text-sm font-medium mb-1 text-light-secondary dark:text-dark-secondary">Verificación</label>
          <div id="support-recaptcha-container" class="flex justify-center"></div>
          <div *ngIf="supportForm.get('recaptchaToken')?.invalid && supportForm.get('recaptchaToken')?.touched" 
              class="text-light-danger dark:text-dark-danger text-sm mt-1">
            Debes completar el reCAPTCHA.
          </div>
        </div>

        <!-- Mensaje de error -->
        <div *ngIf="errorMessage" class="bg-red-50 dark:bg-red-900 border border-red-200 dark:border-red-700 text-red-800 dark:text-red-200 p-4 rounded-md mb-4 flex items-center gap-3">
          <i class="fas fa-exclamation-circle text-red-600 dark:text-red-400"></i>
          <div class="text-light-text dark:text-dark-text">
            {{ errorMessage }}
          </div>
        </div>

        <button
          type="submit"
          class="w-full bg-light-primary dark:bg-dark-primary text-white py-2 px-4 rounded-md hover:bg-light-primary-hover dark:hover:bg-dark-primary-hover focus:ring-2 focus:ring-light-primary-hover dark:focus:ring-dark-primary-hover transition-colors"
          [disabled]="supportForm.invalid"
        >
          Enviar Consulta
        </button>
      </form>
    </div>
  </div>
  <script src="https://www.google.com/recaptcha/api.js?render=explicit" async defer></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</div>