<div class="space-y-6">
  <!-- Filters -->
  <div class="flex flex-col sm:flex-row gap-4 items-start sm:items-center bg-gray-50 dark:bg-gray-700 p-4 rounded-lg">
    <label class="flex items-center gap-2">
      <input type="checkbox" [(ngModel)]="filters.withPhotos" (ngModelChange)="applyFilters()"
             class="text-green-700 dark:text-green-600 focus:ring-green-500 dark:focus:ring-green-400">
      Con fotos
    </label>
    <label class="flex items-center gap-2">
      <input type="checkbox" [(ngModel)]="filters.withComments" (ngModelChange)="applyFilters()"
             class="text-green-700 dark:text-green-600 focus:ring-green-500 dark:focus:ring-green-400">
      Con comentarios
    </label>
    <select [(ngModel)]="filters.sort" (ngModelChange)="applyFilters()"
            class="border border-gray-300 dark:border-gray-600 rounded-md p-2 bg-white dark:bg-gray-800 text-gray-700 dark:text-dark-text">
      <option value="created_at">Más recientes</option>
      <option value="rating">Por calificación</option>
    </select>
    <select [(ngModel)]="filters.order" (ngModelChange)="applyFilters()"
            class="border border-gray-300 dark:border-gray-600 rounded-md p-2 bg-white dark:bg-gray-800 text-gray-700 dark:text-dark-text">
      <option value="DESC">Descendente</option>
      <option value="ASC">Ascendente</option>
    </select>
  </div>

  <!-- Reviews List -->
  <div *ngIf="isLoading" class="flex justify-center items-center">
    <app-spinner [isLoading]="isLoading"></app-spinner>
  </div>

  <div *ngIf="!isLoading && (!reviews || reviews.length === 0)" class="text-gray-600 dark:text-dark-secondary text-center">
    No hay reseñas disponibles para este producto.
  </div>

  <div *ngIf="!isLoading && reviews && reviews.length > 0" class="space-y-4">
    <div *ngFor="let review of reviews" class="bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm">
      <div class="mb-2">
        <span class="font-semibold text-gray-900 dark:text-dark-text">{{ review.user_name.split(' ').slice(0, 2).join(' ') }}</span>
      </div>
      <div class="flex items-center gap-2 mb-2">
        <div class="flex">
          <i *ngFor="let i of [1,2,3,4,5]"
             class="fas fa-star"
             [class.text-yellow-400]="i <= review.rating"
             [class.text-gray-300]="i > review.rating"></i>
        </div>
        <span class="text-sm text-gray-600 dark:text-dark-secondary">{{ formatDate(review.created_at) }}</span>
      </div>
      <div *ngIf="review.media && review.media.length > 0" class="flex gap-2 overflow-x-auto mb-2">
        <div *ngFor="let media of review.media" class="flex-shrink-0">
          <img *ngIf="media.media_type === 'image'" [src]="media.url" alt="Review image"
               class="w-20 h-20 object-cover rounded-lg">
          <video *ngIf="media.media_type === 'video'" [src]="media.url" controls
                 class="w-20 h-20 object-cover rounded-lg"></video>
        </div>
      </div>
      <p *ngIf="review.comment" class="text-gray-600 dark:text-dark-secondary">{{ review.comment }}</p>
    </div>
  </div>

  <!-- Load More -->
  <div *ngIf="hasMoreReviews" class="text-center">
    <button (click)="loadMore()"
            class="bg-light-azulclaro dark:bg-dark-primary text-white font-semibold px-6 py-2 rounded-md hover:bg-light-primary-hover dark:hover:bg-dark-primary-hover transition-colors">
      Cargar más reseñas
    </button>
  </div>
</div>